<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="vi">
<head>
<meta charset="UTF-8">
<title>Qu·∫£n l√Ω kho - 4Petals</title>
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
	rel="stylesheet">
<link th:href="@{/styles/css/inventory/dashboard.css}" rel="stylesheet">
<link th:href="@{/styles/css/inventory/sidebar.css}" rel="stylesheet">
<link th:href="@{/styles/css/inventory/header.css}" rel="stylesheet">
<link rel="stylesheet"
	href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css" />
<link
	href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&display=swap"
	rel="stylesheet">
<script>
    function showOrders() {
        fetch('/orders/list')
            .then(response => response.text())
            .then(html => {
                document.getElementById('content-section').innerHTML = html;
            });
    }

    function showProducts() {
        fetch('/products/list')
            .then(response => response.text())
            .then(html => {
                document.getElementById('content-section').innerHTML = html;
            });
    }
</script>
</head>
<body>
	<div class="dashboard-container">

		<!-- Thanh b√™n tr√°i -->
		<div th:replace="~{inventory/sidebar :: sidebar}"></div>
		<div th:replace="~{inventory/header :: header}"></div>

		<!-- N·ªôi dung ch√≠nh -->
		<div class="main-content show">
			<div
				class="top-bar d-flex justify-content-between align-items-center mt-2">
				<h5 class="fw-bold ms-3">üå∏ Qu·∫£n l√Ω kho</h5>
			</div>
				<!-- Icon Th√™m -->
				<a href="#" class="btn-add" data-bs-toggle="modal"
					data-bs-target="#addMaterialModal">Th√™m nguy√™n li·ªáu</a>
				<!-- Icon S·ª≠a -->
			<!-- Ph·∫ßn hi·ªÉn th·ªã b·∫£ng -->
			<div id="content-section" class="content-box mt-4 mx-3 p-4">
				<h5 class="fw-bold text-danger">Danh s√°ch c√°c nguy√™n li·ªáu trong
					kho</h5>

				<table class="table table-bordered mt-3 align-middle text-center">
					<thead class="table-success">
						<tr>
							<th>STT</th>
							<th>M√£ NL</th>
							<th>T√™n NL</th>
							<th>Gi√° nh·∫≠p</th>
							<th>S·ªë l∆∞·ª£ng t·ªìn</th>
							<th>ƒê∆°n v·ªã t√≠nh</th>
							<th>Nh√† cung c·∫•p</th>
							<th>Thao t√°c</th>
						</tr>
					</thead>
					<tbody>
						<tr th:each="material, iStat : ${listMaterials}">
							<td th:text="${iStat.count}"></td>
							<td th:text="${material != null ? material.maNL : ''}"></td>
							<td th:text="${material.tenNL}"></td>
							<td th:text="${material.giaNhap}"></td>
							<td th:text="${material.soLuongTon}"></td>
							<td th:text="${material.donViTinh}"></td>
							<td th:text="${material.nhaCungCap.tenNCC}"></td>
							<td>
								<!-- CH√àN: Icon Th√™m/S·ª≠a/X√≥a --> <a href="#"
								class="text-primary me-2" data-bs-toggle="modal"
								th:attr="data-bs-target='#editMaterialModal__${material.maNL}'">‚úèÔ∏è</a>
								<!-- Icon X√≥a --> <a href="#" class="text-danger me-2"
								data-bs-toggle="modal"
								th:attr="data-bs-target='#deleteMaterialModal__${material.maNL}'">üóëÔ∏è</a>
							</td>

							<!-- CH√àN: Modal S·ª≠a ri√™ng cho t·ª´ng d√≤ng -->
							<div class="modal fade"
								th:id="'editMaterialModal__' + ${material.maNL}" tabindex="-1">
								<div class="modal-dialog">
									<div class="modal-content">
										<form th:action="@{/products/edit}" method="post">
											<div class="modal-header">
												<h5 class="modal-title">S·ª≠a nguy√™n li·ªáu</h5>
												<button type="button" class="btn-close"
													data-bs-dismiss="modal"></button>
											</div>
											<div class="modal-body">
												<input type="hidden" name="maNL" th:value="${material.maNL}">
												<div class="mb-3">
													<label class="form-label">T√™n nguy√™n li·ªáu</label> <input
														type="text" name="tenNL" class="form-control"
														th:value="${material.tenNL}" required>
												</div>
												<div class="mb-3">
													<label class="form-label">Gi√° nh·∫≠p</label> <input
														type="number" name="giaNhap" class="form-control"
														th:value="${material.giaNhap}" required>
												</div>
												<div class="mb-3">
													<label class="form-label">S·ªë l∆∞·ª£ng t·ªìn</label> <input
														type="number" name="soLuongTon" class="form-control"
														th:value="${material.soLuongTon}" required>
												</div>
												<div class="mb-3">
													<label class="form-label">ƒê∆°n v·ªã t√≠nh</label> <input
														type="text" name="donViTinh" class="form-control"
														th:value="${material.donViTinh}" required>
												</div>
												<div class="mb-3">
													<label class="form-label">Nh√† cung c·∫•p</label> <select
														name="nhaCungCapId" class="form-select" required>
														<option th:each="ncc : ${listSuppliers}"
															th:value="${ncc.id}" th:text="${ncc.tenNCC}"
															th:selected="${ncc.id == material.nhaCungCap.id}"></option>
													</select>
												</div>
											</div>
											<div class="modal-footer">
												<button type="submit" class="btn btn-primary">L∆∞u</button>
												<button type="button" class="btn btn-secondary"
													data-bs-dismiss="modal">H·ªßy</button>
											</div>
										</form>
									</div>
								</div>
							</div>
							<!-- CH√àN END -->

							<!-- CH√àN: Modal X√≥a -->
							<div class="modal fade"
								th:id="'deleteMaterialModal__' + ${material.maNL}" tabindex="-1">
								<div class="modal-dialog">
									<div class="modal-content">
										<div class="modal-header">
											<h5 class="modal-title">X√≥a nguy√™n li·ªáu</h5>
											<button type="button" class="btn-close"
												data-bs-dismiss="modal"></button>
										</div>
										<div class="modal-body">
											B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a nguy√™n li·ªáu "<span
												th:text="${material.tenNL}"></span>" kh√¥ng?
										</div>
										<div class="modal-footer">
											<a th:href="@{'/products/delete/' + ${material.maNL}}"
												class="btn btn-danger">X√≥a</a>
											<button type="button" class="btn btn-secondary"
												data-bs-dismiss="modal">H·ªßy</button>
										</div>
									</div>
								</div>
							</div>
							<!-- CH√àN END -->

						</tr>
					</tbody>
				</table>

				<!-- Modal Th√™m -->
				<div class="modal fade" id="addMaterialModal" tabindex="-1"
					aria-hidden="true">
					<div class="modal-dialog">
						<div class="modal-content">
							<form th:action="@{/products/add}" method="post">
								<div class="modal-header">
									<h5 class="modal-title">Th√™m nguy√™n li·ªáu</h5>
									<button type="button" class="btn-close" data-bs-dismiss="modal"></button>
								</div>
								<div class="modal-body">
									<div class="mb-3">
										<label class="form-label">M√£ nguy√™n li·ªáu</label> <input
											type="text" name="maNL" class="form-control" required>
									</div>
									<div class="mb-3">
										<label class="form-label">T√™n nguy√™n li·ªáu</label> <input
											type="text" name="tenNL" class="form-control" required>
									</div>
									<div class="mb-3">
										<label class="form-label">Gi√° nh·∫≠p</label> <input
											type="number" name="giaNhap" class="form-control" required>
									</div>
									<div class="mb-3">
										<label class="form-label">S·ªë l∆∞·ª£ng t·ªìn</label> <input
											type="number" name="soLuongTon" class="form-control" required>
									</div>
									<div class="mb-3">
										<label class="form-label">ƒê∆°n v·ªã t√≠nh</label> <input
											type="text" name="donViTinh" class="form-control" required>
									</div>
									<div class="mb-3">
										<label class="form-label">Nh√† cung c·∫•p</label> <select
											name="nhaCungCapId" class="form-select" required>
											<option th:each="ncc : ${listSuppliers}" th:value="${ncc.id}"
												th:text="${ncc.tenNCC}"></option>
										</select>
									</div>
								</div>
								<div class="modal-footer">
									<button type="submit" class="btn btn-success">Th√™m</button>
									<button type="button" class="btn btn-secondary"
										data-bs-dismiss="modal">H·ªßy</button>
								</div>
							</form>
						</div>
					</div>
				</div>
				<!-- END Modal Th√™m -->

			</div>
		</div>
	</div>
	<script
		src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
