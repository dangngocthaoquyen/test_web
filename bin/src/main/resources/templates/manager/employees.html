<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{manager/layout}">
<head>
<title>Quản lý nhân viên</title>
</head>
<body>
	<div layout:fragment="content">

		<div class="stats-cards">
			<div class="stat-card total">
				<h3>Tổng số nhân viên</h3>
				<div class="value" id="totalEmployeesStat"
					th:text="${totalEmployees} ?: '0'">0</div>
			</div>
			<div class="stat-card active">
				<h3>Đang làm việc</h3>
				<div class="value" id="activeEmployeesStat"
					th:text="${activeEmployees} ?: '0'">0</div>
			</div>
			<div class="stat-card inactive">
				<h3>Nghỉ việc</h3>
				<div class="value" id="inactiveEmployeesStat"
					th:text="${inactiveEmployees} ?: '0'">0</div>
			</div>
			<div class="stat-card blocked">
				<h3>Bị khóa</h3>
				<div class="value" id="blockedEmployeesStat"
					th:text="${blockedEmployees} ?: '0'">0</div>
			</div>
		</div>

		<div class="search-filter-container">
			<form id="searchFilterForm" th:action="@{/manager/employees}"
				method="get">
				<div class="search-box">
					<input type="text" name="keyword"
						placeholder="Tìm kiếm theo tên, email, hoặc username..."
						th:value="${keyword}">
					<button type="submit">
						<i class="fas fa-search"></i> Tìm kiếm
					</button>
				</div>

				<div class="filter-group">
					<div class="filter-item">
						<label for="statusFilter">Trạng thái:</label> <select
							id="statusFilter" name="status">
							<option value="">Tất cả</option>
							<option value="1" th:selected="${status == '1'}">Còn làm
								việc</option>
							<option value="0" th:selected="${status == '0'}">Nghỉ
								việc</option>
							<option value="-1" th:selected="${status == '-1'}">Bị
								khóa tài khoản</option>
						</select>
					</div>
					<div class="filter-item">
						<label for="roleFilter">Vai trò:</label> <select id="roleFilter"
							name="roleId">
							<option value="">Tất cả</option>
							<option th:each="role : ${roles}" th:value="${role.roleId}"
								th:text="${role.roleName.displayName}"
								th:selected="${roleId == role.roleId}"
								th:if="${role.roleName.name() != 'ADMIN' 
								and role.roleName.name() != 'MANAGER'
								and role.roleName.name() != 'CUSTOMER'}"></option>
						</select>
					</div>

				</div>
			</form>
		</div>

		<table class="employees-table">
			<thead>
				<tr>
					<th style="width: 80px">Mã</th>
					<th>Họ tên</th>
					<th style="width: 180px">SĐT</th>
					<th style="width: 260px">Email</th>
					<th style="width: 140px">Chức vụ</th>
					<th style="width: 120px">Hành động</th>
				</tr>
			</thead>
			<tbody id="employeeTableBody">
				<tr>
					<td colspan="6" style="text-align: center; padding: 16px">
						Không tìm thấy nhân viên!</td>
				</tr>
			</tbody>

		</table>
		
		<div class="pagination" id="employeePagination"></div>

	</div>


	<th:block layout:fragment="scripts">
		<script th:src="@{/styles/js/manager/employees.js}"></script>
	</th:block>
</body>
</html>
