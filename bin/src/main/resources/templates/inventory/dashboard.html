<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{inventory/layout}">
<head>
<meta charset="UTF-8">
<title>Qu·∫£n l√Ω kho - 4Petals</title>
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
	rel="stylesheet">
<link th:href="@{/styles/css/inventory/dashboard.css}" rel="stylesheet">
<link th:href="@{/styles/css/inventory/header.css}" rel="stylesheet">

<th:block layout:fragment="styles">
	<link rel="stylesheet" href="/styles/css/components/modal.css">
</th:block>
</head>
<body>
	<div layout:fragment="content">
		<div class="dashboard-container">
			<!-- N·ªôi dung ch√≠nh -->
			<div class="main-content show">
				<div
					class="top-bar d-flex justify-content-between align-items-center mt-2">
					<h5 class="fw-bold ms-3">üå∏ Qu·∫£n l√Ω kho</h5>
				</div>
				<!-- Icon Th√™m -->
				<a href="javascript:void(0)" class="btn-add"
					onclick="openModal('addMaterialModal')"> <i
					class="fas fa-user-plus"></i> Th√™m nguy√™n li·ªáu
				</a>
				<!-- Ph·∫ßn hi·ªÉn th·ªã b·∫£ng -->
				<div id="content-section" class="content-box mt-4 mx-3 p-4">
					<h5 class="fw-bold text-danger">Danh s√°ch c√°c nguy√™n li·ªáu
						trong kho</h5>

					<table class="table table-bordered mt-3 align-middle text-center">
						<thead class="table-success">
							<tr>
								<th>STT</th>
								<th>M√£ NL</th>
								<th>T√™n NL</th>
<<<<<<< HEAD
								<th>S·ªë l∆∞·ª£ng</th>
=======
								<th>S·ªë l∆∞·ª£ng t·ªìn</th>
>>>>>>> fa4535467b378296a1ee459fed9d873ec68045a1
								<th>ƒê∆°n v·ªã t√≠nh</th>
								<th>Thao t√°c</th>
							</tr>
						</thead>
						<tbody>
							<tr th:each="material, iStat : ${listMaterials}">
								<td th:text="${iStat.count}"></td>
								<td th:text="${material != null ? material.maNL : ''}"></td>
								<td th:text="${material.tenNL}"></td>
								<td th:text="${material.soLuongTon}"></td>
								<td th:text="${material.donViTinh}"></td>
								<td><a href="#" class="text-primary me-2"
									th:onclick="|openModal('editMaterialModal__${material.maNL}')|">
										<i class="fa-solid fa-pen"></i>
								</a> <a href="#" class="text-danger me-2"
									th:onclick="|openModal('deleteMaterialModal__${material.maNL}')|">
										<i class="fa-solid fa-trash"></i>
								</a></td>

								<!-- CH√àN: Modal S·ª≠a ri√™ng cho t·ª´ng d√≤ng -->
								<div class="modal"
									th:id="'editMaterialModal__' + ${material.maNL}">
									<div class="modal-content">
										<div class="modal-header">
											<h2>S·ª≠a Nguy√™n Li·ªáu</h2>
											<button type="button" class="close-modal"
												th:onclick="|closeModal('editMaterialModal__${material.maNL}')|">&times;</button>
										</div>

										<div class="modal-body">
											<form th:action="@{/inventory/materials/edit}" method="post">
												<input type="hidden" name="maNL" th:value="${material.maNL}">

												<div class="form-group">
													<label>T√™n nguy√™n li·ªáu:</label> <input type="text"
														name="tenNL" th:value="${material.tenNL}" required>
												</div>

												<div class="form-group">
													<label>S·ªë l∆∞·ª£ng gi·∫£m:</label> <input type="number"
														name="soLuongGiam" th:value="${material.soLuongTon}"
														required>
												</div>

												<div class="form-group">
													<label>ƒê∆°n v·ªã t√≠nh:</label> <input type="text"
														name="donViTinh" th:value="${material.donViTinh}" required>
												</div>

												<div class="form-actions">
													<button type="submit" class="btn-submit">L∆∞u</button>
													<button type="button" class="btn-cancel"
														th:onclick="|closeModal('editMaterialModal__${material.maNL}')|">&times;</button>

												</div>
											</form>
										</div>
									</div>
								</div>
								<!-- CH√àN END -->

								<!-- CH√àN: Modal X√≥a -->
								<div class="modal"
									th:id="'deleteMaterialModal__' + ${material.maNL}">
									<div class="modal-content">
										<div class="modal-header">
											<h2>X√≥a Nguy√™n Li·ªáu</h2>
											<button type="button" class="close-modal"
												th:onclick="|closeModal('deleteMaterialModal__${material.maNL}')|">&times;</button>

										</div>

										<div class="modal-body">
											<p>
												B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a "<span th:text="${material.tenNL}"></span>"
												kh√¥ng?
											</p>
										</div>

										<div class="modal-footer">
											<form th:action="@{/inventory/materials/delete}"
												method="post">
												<input type="hidden" name="maNL" th:value="${material.maNL}">
												<button type="submit" class="btn-submit btn-danger">X√≥a</button>
											</form>
											<button type="button" class="btn-cancel"
												th:onclick="|closeModal('deleteMaterialModal__${material.maNL}')|">&times;</button>

										</div>
									</div>
								</div>
								<!-- CH√àN END -->
							</tr>
						</tbody>
					</table>

					<!-- Modal Th√™m Nguy√™n Li·ªáu -->
					<div id="addMaterialModal" class="modal">
						<div class="modal-content">
							<div class="modal-header">
								<h2>Th√™m Nguy√™n Li·ªáu</h2>
								<button type="button" class="close-modal"
									onclick="closeModal('addMaterialModal')">&times;</button>
							</div>

							<div class="modal-body">
								<form id="materialForm" th:action="@{/inventory/materials/add}"
									method="post">
									<div class="form-group">
										<label for="tenNL">T√™n nguy√™n li·ªáu:</label> <input type="text"
											id="tenNL" name="tenNL" required>
									</div>

									<div class="form-group">
										<label for="donViTinh">ƒê∆°n v·ªã t√≠nh:</label> <input type="text"
											id="donViTinh" name="donViTinh" required>
									</div>

									<div class="form-actions">
										<button type="submit" class="btn-submit">Th√™m</button>
										<button type="button" class="btn-cancel"
											onclick="closeModal('addMaterialModal')">H·ªßy</button>
									</div>
								</form>
							</div>
						</div>
					</div>

					<!-- END Modal Th√™m -->

				</div>
			</div>
		</div>
	</div>
	<th:block layout:fragment="scripts">
		<script th:src="@{/styles/js/inventory/suppliers.js}"></script>
	</th:block>
</body>
</html>
